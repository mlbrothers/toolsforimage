{% extends "es/base.html" %}

{% block title %}Aplica efectos de imagen en línea | ToolsForImage | Herramientas gratuitas y completas para difuminar caras, conversión de imágenes, edición, redimensionamiento, eliminar fondos, difuminar fondos y más{% endblock %}

{% block meta_description %}
<meta name="description" content="Aplica varios efectos a tus imágenes con ToolsForImage. Mejora tus fotos con filtros como escala de grises, desenfoque, nitidez y más.">
{% endblock %}

{% block content %}
<h1>Herramienta Gratuita de Efectos de Imagen</h1>
<p>Mejora tus imágenes con varios efectos usando ToolsForImage. Sube una imagen, aplica efectos y descarga el resultado.</p>
<p>Sube tu archivo de imagen y aplica efectos al instante. Elige tu imagen:</p>
<form id="effects-form" action="/apply-effects" method="post" enctype="multipart/form-data">
    <input type="file" id="image-upload" name="image" accept="image/*" style="display: none;" onchange="previewImage(event)">
    <button type="button" class="upload-button" onclick="document.getElementById('image-upload').click();">Subir desde la Computadora</button>
    <br>
    <canvas id="canvas"></canvas>
    <br>
    <div class="effects-container">
        <button type="button" class="effect-button" onclick="toggleEffect('grayscale')">Blanco y Negro</button>
        <button type="button" class="effect-button" onclick="toggleEffect('blur')">Desenfoque</button>
        <button type="button" class="effect-button" onclick="toggleEffect('sharpen')">Nitidez</button>
        <button type="button" class="effect-button" onclick="toggleEffect('sepia')">Sepia</button>
        <button type="button" class="effect-button" onclick="toggleEffect('invert')">Invertir</button>
        <button type="button" class="effect-button" onclick="toggleEffect('brightness')">Brillo</button>
        <button type="button" class="effect-button" onclick="toggleEffect('contrast')">Contraste</button>
        <button type="button" class="effect-button" onclick="toggleEffect('saturation')">Saturación</button>
    </div>
    <br>
    <input type="hidden" id="effect-applied" name="effect" value="">
    <button type="submit" class="download-button" onclick="return validateImageSelection();">Descargar Imagen Editada</button>
</form>

<div class="info-container">
    <div class="info-section">
        <h2>¿Qué son los Efectos de Imagen?</h2>
        <p>Los efectos de imagen son filtros o ajustes aplicados a las fotos para mejorar su apariencia o crear un estilo visual específico. Al usar diferentes efectos, puedes modificar los colores, la nitidez, el brillo y más de una imagen, dándole un aspecto completamente nuevo. Ya sea que busques un estilo vintage o un toque moderno y definido, los efectos de imagen te permiten transformar tus fotos de manera creativa.</p>
    </div>
    <div class="info-section">
        <h2>¿Por Qué Aplicar Efectos de Imagen?</h2>
        <p>Aplicar efectos a tus imágenes puede resaltar lo mejor de tus fotos. Efectos como el blanco y negro o el sepia pueden evocar ciertas emociones o épocas, mientras que otros, como los ajustes de brillo y contraste, ayudan a afinar la calidad general de la imagen. Los efectos de imagen son útiles para crear consistencia estética, mejorar el estado de ánimo y hacer que las imágenes destaquen, ya sea para uso personal, redes sociales o proyectos profesionales. Al aplicar efectos, puedes darle a tus imágenes el aspecto perfecto para cualquier ocasión.</p>
    </div>
    <div class="info-section">
        <h2>Cómo Usar Nuestra Herramienta de Efectos de Imagen</h2>
        <p>Nuestra herramienta de efectos de imagen es fácil de usar. Simplemente sube tu foto, elige uno o más efectos de las opciones disponibles y haz clic para aplicarlos. Puedes mejorar tus imágenes con una variedad de efectos:</p>
        <ul>
            <li><strong>Blanco y Negro (Escala de Grises):</strong> Elimina todos los colores de tu imagen, dándole un aspecto monocromático clásico.</li>
            <li><strong>Desenfoque:</strong> Aplica un efecto de enfoque suave, haciendo que la imagen parezca más suave o resaltando áreas específicas al desenfocar otras.</li>
            <li><strong>Nitidez:</strong> Aumenta la definición de la imagen, haciendo que los bordes sean más nítidos y mejorando la claridad.</li>
            <li><strong>Sepia:</strong> Añade un tono marrón cálido a tu imagen, evocando una sensación vintage y nostálgica.</li>
        </ul>
    </div>
    
    <div class="info-section">
        <h2>Más Efectos que Puedes Aplicar</h2>
        <p>Explora opciones adicionales para ajustar tus imágenes y lograr el aspecto deseado:</p>
        <ul>
            <li><strong>Invertir:</strong> Invierte los colores de tu imagen para un efecto negativo impactante.</li>
            <li><strong>Brillo:</strong> Ajusta los niveles de luz en tu imagen para hacerla más brillante o más oscura, dependiendo del estado de ánimo deseado.</li>
            <li><strong>Contraste:</strong> Cambia el equilibrio entre las áreas claras y oscuras, dando a tu foto un aspecto más dramático o sutil.</li>
            <li><strong>Saturación:</strong> Controla la intensidad de los colores, haciéndolos más vibrantes o apagados, dependiendo del impacto visual que desees.</li>
        </ul>
        <p>Nuestra herramienta funciona en todos los dispositivos y asegura que tus fotos mantengan su calidad mientras aplicas estos efectos, dándote control total sobre el resultado final.</p>
    </div>
    
    <div class="info-section">
        <h2>Beneficios de Usar Nuestra Herramienta de Efectos de Imagen</h2>
        <p>Al usar nuestra herramienta de efectos de imagen, puedes disfrutar de una amplia gama de beneficios:</p>
        <ul>
            <li><strong>Control Creativo:</strong> Experimenta con varios efectos para lograr tu estilo artístico deseado.</li>
            <li><strong>Interfaz Fácil de Usar:</strong> Aplica y ajusta efectos de manera sencilla con un diseño intuitivo.</li>
            <li><strong>Sin Necesidad de Software:</strong> Accede a la herramienta directamente desde tu navegador sin necesidad de software adicional.</li>
            <li><strong>Vista Previa Instantánea:</strong> Ve cómo se ve tu foto con cada efecto aplicado en tiempo real.</li>
            <li><strong>Salida de Alta Calidad:</strong> Asegura que tus fotos mantengan nitidez y detalle, incluso después de aplicar efectos.</li>
        </ul>
    </div>
    <div class="info-section">
        <h2>Casos Comunes de Uso para Efectos de Imagen</h2>
        <p>Los efectos de imagen se usan comúnmente en varios escenarios, como:</p>
        <ul>
            <li><strong>Contenido para Redes Sociales:</strong> Mejora tus fotos con efectos que las hagan destacar en plataformas como Instagram y Facebook.</li>
            <li><strong>Edición Fotográfica:</strong> Aplica toques finales a proyectos de fotografía profesional para mejorar su impacto visual.</li>
            <li><strong>Marketing y Publicidad:</strong> Ajusta el tono y el estado de ánimo de las imágenes para alinearlos con el contenido de marca y promocional.</li>
            <li><strong>Proyectos Personales:</strong> Transforma tus fotos personales en piezas artísticas experimentando con diferentes efectos.</li>
        </ul>
    </div>
</div>



<style>
    h1 {
        color: var(--secondary-color);
        font-family: var(--font-family);
        text-align: center;
    }

    main {
        padding: 2em;
        text-align: center;
    }

    .upload-button {
        background-color: var(--link-hover-color); 
        color: var(--background-color);
        padding: 20px 40px;
        border: none;
        cursor: pointer;
        font-size: 20px;
        transition: transform 0.3s;
        border-radius: 5px;
    }

    .upload-button:hover {
        transform: scale(1.1);
    }

    .effect-button {
        background-color: var(--link-hover-color); 
        color: var(--background-color);
        border: 2px solid var(--box-hover-color);
        padding: 10px 20px;
        cursor: pointer;
        font-size: 18px;
        margin: 10px;
        transition: transform 0.3s;
        border-radius: 5px;
    }

    .effect-button.active {
        background-color: var(--box-hover-color);
        color: var(--background-color);
    }

    .effect-button:hover {
        transform: scale(1.1);
        background-color: var(--box-hover-text-color);
    }

    canvas {
        max-width: 100%;
        margin: 20px auto;
        display: none;
        border: 2px solid var(--box-hover-color);
        border-radius: 5px;
    }

    .download-button {
        background-color: var(--background-color);
        color: var(--box-hover-color);
        border: 2px solid var(--box-hover-color);
        padding: 10px 20px;
        cursor: pointer;
        font-size: 20px;
        transition: transform 0.3s;
        margin-top: 10px;
        margin-bottom: 20px;
        border-radius: 5px;
    }

    .effects-container {
        margin-top: 20px;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }

    li {
        line-height: 1.6;
    }

    
</style>

<script>
    let canvas, ctx, img, originalImageData;
    let activeEffects = [];

    function validateImageSelection() {
        const imageUpload = document.getElementById('image-upload');
        if (!imageUpload.value) {
            alert('Please select an image to upload.');
            return false;
        }
        document.getElementById('effect-applied').value = getAppliedEffects();
        return true;
    }

    function getAppliedEffects() {
        return activeEffects.join(',');
    }

    function previewImage(event) {
        const file = event.target.files[0];
        if (file) {
            img = new Image();
            img.onload = function() {
                canvas = document.getElementById('canvas');
                canvas.width = img.width;
                canvas.height = img.height;
                ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0, img.width, img.height);
                canvas.style.display = 'block';
                originalImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            }
            img.src = URL.createObjectURL(file);
        }
    }

    function toggleEffect(effect) {
        if (!canvas) {
            alert('Please upload an image first.');
            return;
        }

        const index = activeEffects.indexOf(effect);
        if (index > -1) {
            activeEffects.splice(index, 1);
        } else {
            activeEffects.push(effect);
        }

        const button = document.querySelector(`.effect-button[onclick="toggleEffect('${effect}')"]`);
        button.classList.toggle('active');

        applyEffects();
    }

    function applyEffects() {
        ctx.putImageData(originalImageData, 0, 0);
        let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        const data = imageData.data;
        console.log("HI", applyEffects);
        if (activeEffects.includes('grayscale')) {
            for (let i = 0; i < data.length; i += 4) {
                const avg = (data[i] + data[i + 1] + data[i + 2]) / 3;
                data[i] = data[i + 1] = data[i + 2] = avg;
            }
        }

        if (activeEffects.includes('blur')) {
            // Apply a simplified blur effect
            const blurRadius = 3;
            const width = canvas.width;
            const height = canvas.height;
            
            for (let y = 0; y < height; y++) {
                for (let x = 0; x < width; x++) {
                    let r = 0, g = 0, b = 0, count = 0;
                    
                    for (let dy = -blurRadius; dy <= blurRadius; dy++) {
                        for (let dx = -blurRadius; dx <= blurRadius; dx++) {
                            const nx = x + dx;
                            const ny = y + dy;
                            
                            if (nx >= 0 && nx < width && ny >= 0 && ny < height) {
                                const i = (ny * width + nx) * 4;
                                r += data[i];
                                g += data[i + 1];
                                b += data[i + 2];
                                count++;
                            }
                        }
                    }
                    
                    const i = (y * width + x) * 4;
                    data[i] = r / count;
                    data[i + 1] = g / count;
                    data[i + 2] = b / count;
                }
            }
        }

        if (activeEffects.includes('sharpen')) {
            sharpen(imageData, canvas.width, canvas.height);
        }

        if (activeEffects.includes('sepia')) {
            for (let i = 0; i < data.length; i += 4) {
                const r = data[i];
                const g = data[i + 1];
                const b = data[i + 2];
                data[i] = (r * 0.393) + (g * 0.769) + (b * 0.189);
                data[i + 1] = (r * 0.349) + (g * 0.686) + (b * 0.168);
                data[i + 2] = (r * 0.272) + (g * 0.534) + (b * 0.131);
            }
        }

        if (activeEffects.includes('invert')) {
            for (let i = 0; i < data.length; i += 4) {
                data[i] = 255 - data[i];
                data[i + 1] = 255 - data[i + 1];
                data[i + 2] = 255 - data[i + 2];
            }
        }

        if (activeEffects.includes('brightness')) {
            const brightnessValue = 50;
            for (let i = 0; i < data.length; i += 4) {
                data[i] += brightnessValue;
                data[i + 1] += brightnessValue;
                data[i + 2] += brightnessValue;
            }
        }

        if (activeEffects.includes('contrast')) {
            const contrastFactor = 1.5;
            for (let i = 0; i < data.length; i += 4) {
                data[i] = ((data[i] - 128) * contrastFactor) + 128;
                data[i + 1] = ((data[i + 1] - 128) * contrastFactor) + 128;
                data[i + 2] = ((data[i + 2] - 128) * contrastFactor) + 128;
            }
        }

        if (activeEffects.includes('saturation')) {
            const saturationFactor = 1.5;
            for (let i = 0; i < data.length; i += 4) {
                const avg = (data[i] + data[i + 1] + data[i + 2]) / 3;
                data[i] = avg + (data[i] - avg) * saturationFactor;
                data[i + 1] = avg + (data[i + 1] - avg) * saturationFactor;
                data[i + 2] = avg + (data[i + 2] - avg) * saturationFactor;
            }
        }

        ctx.putImageData(imageData, 0, 0);
    }

    function boxBlur(imageData, width, height, radius) {
        const pixels = imageData.data;
        const temp = new Uint8ClampedArray(pixels.length);
        const boxSize = (radius * 2 + 1) * (radius * 2 + 1);

        for (let y = 0; y < height; y++) {
            for (let x = 0; x < width; x++) {
                let r = 0, g = 0, b = 0;

                for (let ky = -radius; ky <= radius; ky++) {
                    for (let kx = -radius; kx <= radius; kx++) {
                        const px = Math.min(width - 1, Math.max(0, x + kx));
                        const py = Math.min(height - 1, Math.max(0, y + ky));
                        const i = (py * width + px) * 4;
                        r += pixels[i];
                        g += pixels[i + 1];
                        b += pixels[i + 2];
                    }
                }

                const i = (y * width + x) * 4;
                temp[i] = r / boxSize;
                temp[i + 1] = g / boxSize;
                temp[i + 2] = b / boxSize;
                temp[i + 3] = pixels[i + 3];
            }
        }

        for (let i = 0; i < pixels.length; i++) {
            pixels[i] = temp[i];
        }
    }

    function sharpen(imageData, width, height) {
        const pixels = imageData.data;
        const temp = new Uint8ClampedArray(pixels.length);
        const kernel = [
            0, -1, 0,
            -1, 5, -1,
            0, -1, 0
        ];

        for (let y = 1; y < height - 1; y++) {
            for (let x = 1; x < width - 1; x++) {
                const i = (y * width + x) * 4;
                let r = 0, g = 0, b = 0;

                for (let ky = -1; ky <= 1; ky++) {
                    for (let kx = -1; kx <= 1; kx++) {
                        const ki = ((y + ky) * width + (x + kx)) * 4;
                        const kw = kernel[(ky + 1) * 3 + (kx + 1)];
                        r += pixels[ki] * kw;
                        g += pixels[ki + 1] * kw;
                        b += pixels[ki + 2] * kw;
                    }
                }

                temp[i] = Math.min(255, Math.max(0, r));
                temp[i + 1] = Math.min(255, Math.max(0, g));
                temp[i + 2] = Math.min(255, Math.max(0, b));
                temp[i + 3] = pixels[i + 3];
            }
        }

        for (let i = 0; i < pixels.length; i++) {
            pixels[i] = temp[i];
        }
    }
</script>
{% endblock %}
